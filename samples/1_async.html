<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<h1>Async upload</h1>
<form method="POST" action="/upload" enctype="multipart/form-data" id="myform">
    <input type="file" id="myfile" name="myfile">
    <button id="upload-file">Upload!</button>
</form>
<div class="result" style="border: 1px solid black;"></div>
<script>
$(function() {
    $('#upload-file').on('click', function(e){
        e.preventDefault();
        console.log("Uploading!");
        $.post("/upload_async", $("#myform").serialize(), function(data) {
            $(".result").html(data.message);
        });
    });
});
</script>
