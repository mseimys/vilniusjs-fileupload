<h1>iframe hack</h1>
<iframe id="uploadTrg" name="uploadTrg" height="0" width="0" frameborder="0"></iframe>
<form method="POST" action="/upload" enctype="multipart/form-data" target="uploadTrg" id="myform">
    <input type="file" id="myfile" name="myfile">
    <input type="submit" value="Upload" name="submit">
</form>
<script>
    var myform = document.getElementById('myform');
    myform.addEventListener('submit', function() {
        var iframe = document.getElementById('uploadTrg'),
            iframeClone = iframe.cloneNode(true);
        iframe.parentNode.replaceChild(iframeClone, iframe);
        // Hook to iframe's load event!
        iframeClone.addEventListener('load', function(){
            alert("File uploaded!")
        });
    });
</script>
